# n8n è‡ªå®šä¹‰èŠ‚ç‚¹å¼€å‘å®Œå…¨æŒ‡å—

<!--
å°é¢å›¾å»ºè®®ï¼šä»£ç ä¸å¼€å‘ä¸»é¢˜
åŸå›¾å‚è€ƒï¼šhttps://images.unsplash.com/photo-1555066931-4365d14bab8c?w=1200&q=80
éœ€è¦ä¸‹è½½åä¸Šä¼ åˆ°å¾®ä¿¡ç´ æåº“
-->

> ä»é›¶å¼€å§‹ï¼Œæ‰‹æŠŠæ‰‹æ•™ä½ å¼€å‘ n8n è‡ªå®šä¹‰èŠ‚ç‚¹ï¼Œæ‰©å±•å·¥ä½œæµè‡ªåŠ¨åŒ–èƒ½åŠ›

---

## æœ¬æ–‡æ¦‚è¦

| é¡¹ç›® | å†…å®¹ |
|------|------|
| **é˜…è¯»æ—¶é•¿** | çº¦ 25 åˆ†é’Ÿ |
| **éš¾åº¦ç­‰çº§** | â­â­â­ è¿›é˜¶çº§ |
| **é€‚åˆäººç¾¤** | æœ‰ TypeScript åŸºç¡€çš„å¼€å‘è€… |

**æœ¬æ–‡è¦ç‚¹ï¼š**
- n8n æ˜¯ä»€ä¹ˆåŠå…¶æ ¸å¿ƒç‰¹æ€§
- ä¸ºä»€ä¹ˆè¦å¼€å‘è‡ªå®šä¹‰èŠ‚ç‚¹
- èŠ‚ç‚¹å¼€å‘ä¸‰å±‚æ¶æ„è¯¦è§£
- å‡­æ®ç³»ç»Ÿä¸å®‰å…¨è®¤è¯
- å®Œæ•´çš„å¼€å‘ã€æµ‹è¯•ã€å‘å¸ƒæµç¨‹
- å®æˆ˜æ¡ˆä¾‹ï¼šAI æµè§ˆå™¨è‡ªåŠ¨åŒ–èŠ‚ç‚¹

**å‰ç½®çŸ¥è¯†ï¼š**
- TypeScript åŸºç¡€è¯­æ³•
- Node.js å¼€å‘ç»éªŒ
- äº†è§£ n8n åŸºæœ¬æ¦‚å¿µï¼ˆå¯å…ˆé˜…è¯»å…¥é—¨æ–‡ç« ï¼‰

---

## ä¸€ã€ä»€ä¹ˆæ˜¯ n8nï¼Ÿ

### 1.1 æ¦‚è¿°

**n8n**ï¼ˆnodemationï¼‰æ˜¯ä¸€ä¸ªå¼€æºçš„å·¥ä½œæµè‡ªåŠ¨åŒ–å·¥å…·ï¼Œé‡‡ç”¨å…¬å¹³ä»£ç è®¸å¯è¯ï¼ˆFair-code Licenseï¼‰ã€‚å®ƒå…è®¸ä½ é€šè¿‡å¯è§†åŒ–çš„æ–¹å¼è¿æ¥å„ç§åº”ç”¨ç¨‹åºå’ŒæœåŠ¡ï¼Œåˆ›å»ºå¼ºå¤§çš„è‡ªåŠ¨åŒ–å·¥ä½œæµï¼Œæ— éœ€ç¼–å†™å¤æ‚çš„ä»£ç ã€‚

### 1.2 æ ¸å¿ƒç‰¹æ€§

**1. å¯è§†åŒ–å·¥ä½œæµç¼–è¾‘å™¨**
- èŠ‚ç‚¹å¼ç¼–ç¨‹ï¼šé€šè¿‡æ‹–æ‹½èŠ‚ç‚¹å’Œè¿æ¥çº¿åˆ›å»ºå·¥ä½œæµ
- å®æ—¶é¢„è§ˆï¼šå³æ—¶æŸ¥çœ‹æ¯ä¸ªèŠ‚ç‚¹çš„æ‰§è¡Œç»“æœ
- è°ƒè¯•åŠŸèƒ½ï¼šè½»æ¾è¿½è¸ªæ•°æ®æµå’Œæ’æŸ¥é—®é¢˜

**2. ä¸°å¯Œçš„é›†æˆèƒ½åŠ›**
- 400+ å†…ç½®èŠ‚ç‚¹ï¼šæ”¯æŒ GitHubã€Google Sheetsã€Slackã€Notion ç­‰ä¸»æµæœåŠ¡
- HTTP è¯·æ±‚ï¼šæ”¯æŒä»»ä½•å…·æœ‰ API çš„æœåŠ¡
- Webhookï¼šæ¥æ”¶å’Œå“åº”å¤–éƒ¨äº‹ä»¶
- è‡ªå®šä¹‰èŠ‚ç‚¹ï¼šå¯ä»¥åˆ›å»ºä¸“å±çš„èŠ‚ç‚¹æ‰©å±•åŠŸèƒ½

**3. çµæ´»çš„éƒ¨ç½²æ–¹å¼**
- è‡ªæ‰˜ç®¡ï¼šå®Œå…¨æ§åˆ¶æ•°æ®å’Œéšç§
- n8n Cloudï¼šå®˜æ–¹æ‰˜ç®¡æœåŠ¡ï¼Œå¼€ç®±å³ç”¨
- Dockerï¼šå®¹å™¨åŒ–éƒ¨ç½²ï¼Œæ˜“äºç»´æŠ¤

**4. å¼ºå¤§çš„æ•°æ®å¤„ç†**
- JavaScript è¡¨è¾¾å¼ï¼šåœ¨èŠ‚ç‚¹ä¸­ç›´æ¥ç¼–å†™ JS ä»£ç å¤„ç†æ•°æ®
- æ•°æ®è½¬æ¢ï¼šå†…ç½®å‡½æ•°å¤„ç† JSONã€æ—¥æœŸã€æ–‡æœ¬ç­‰
- åˆ†æ”¯å’Œå¾ªç¯ï¼šæ”¯æŒæ¡ä»¶åˆ¤æ–­å’Œæ‰¹é‡å¤„ç†

### 1.3 ä½¿ç”¨åœºæ™¯

n8n é€‚ç”¨äºå„ç§è‡ªåŠ¨åŒ–åœºæ™¯ï¼š

- **æ•°æ®åŒæ­¥**ï¼šåœ¨ä¸åŒç³»ç»Ÿä¹‹é—´åŒæ­¥æ•°æ®ï¼ˆå¦‚ CRM åˆ° Google Sheetsï¼‰
- **é€šçŸ¥å’Œæé†’**ï¼šç›‘æ§äº‹ä»¶å¹¶å‘é€é€šçŸ¥ï¼ˆå¦‚ GitHub issue æé†’åˆ° Slackï¼‰
- **æ•°æ®å¤„ç†**ï¼šå®šæ—¶æŠ“å–ã€æ¸…æ´—å’Œåˆ†ææ•°æ®
- **API é›†æˆ**ï¼šè¿æ¥å¤šä¸ª API åˆ›å»ºå¤æ‚çš„ä¸šåŠ¡æµç¨‹
- **å†…å®¹ç®¡ç†**ï¼šè‡ªåŠ¨åŒ–å‘å¸ƒå’Œæ›´æ–°å†…å®¹
- **ç›‘æ§å’Œå‘Šè­¦**ï¼šç›‘æ§æœåŠ¡çŠ¶æ€å¹¶è‡ªåŠ¨å“åº”

### 1.4 ä¸ºä»€ä¹ˆé€‰æ‹© n8nï¼Ÿ

**vs Zapier / Makeï¼ˆIntegromatï¼‰**
- âœ… **å¼€æº**ï¼šä»£ç å®Œå…¨å¼€æ”¾ï¼Œå¯è‡ªå®šä¹‰
- âœ… **è‡ªæ‰˜ç®¡**ï¼šæ•°æ®ç•™åœ¨è‡ªå·±çš„æœåŠ¡å™¨ä¸Š
- âœ… **æ— é™åˆ¶**ï¼šæ²¡æœ‰æ‰§è¡Œæ¬¡æ•°æˆ–åŠŸèƒ½é™åˆ¶
- âœ… **æˆæœ¬ä½**ï¼šè‡ªæ‰˜ç®¡ç‰ˆæœ¬å…è´¹ä½¿ç”¨

**vs çº¯ä»£ç è‡ªåŠ¨åŒ–**
- âœ… **å¯è§†åŒ–**ï¼šå·¥ä½œæµä¸€ç›®äº†ç„¶ï¼Œæ˜“äºç†è§£å’Œç»´æŠ¤
- âœ… **å¿«é€Ÿå¼€å‘**ï¼šæ‹–æ‹½å¼æ“ä½œï¼Œå¤§å¹…å‡å°‘å¼€å‘æ—¶é—´
- âœ… **å›¢é˜Ÿåä½œ**ï¼šéæŠ€æœ¯äººå‘˜ä¹Ÿèƒ½å‚ä¸å·¥ä½œæµè®¾è®¡
- âœ… **å†…ç½®é›†æˆ**ï¼šæ— éœ€ä»é›¶å®ç°å¸¸ç”¨æœåŠ¡çš„é›†æˆ

---

## äºŒã€n8n è‡ªå®šä¹‰èŠ‚ç‚¹å¼€å‘

### 2.1 ä¸ºä»€ä¹ˆè¦å¼€å‘è‡ªå®šä¹‰èŠ‚ç‚¹ï¼Ÿ

è™½ç„¶ n8n æä¾›äº† 400+ å†…ç½®èŠ‚ç‚¹ï¼Œä½†åœ¨ä»¥ä¸‹æƒ…å†µä¸‹ï¼Œä½ å¯èƒ½éœ€è¦å¼€å‘è‡ªå®šä¹‰èŠ‚ç‚¹ï¼š

1. **å†…éƒ¨ç³»ç»Ÿé›†æˆ**ï¼šè¿æ¥å…¬å¸å†…éƒ¨çš„ API æˆ–æœåŠ¡
2. **ä¸“æœ‰æœåŠ¡**ï¼šé›†æˆå°šæœªè¢« n8n å®˜æ–¹æ”¯æŒçš„ç¬¬ä¸‰æ–¹æœåŠ¡
3. **å¤æ‚ä¸šåŠ¡é€»è¾‘**ï¼šå°è£…ç‰¹å®šçš„ä¸šåŠ¡æµç¨‹ä¸ºå¯å¤ç”¨èŠ‚ç‚¹
4. **æ€§èƒ½ä¼˜åŒ–**ï¼šå°†é¢‘ç¹ä½¿ç”¨çš„æ“ä½œä¼˜åŒ–ä¸ºä¸“ç”¨èŠ‚ç‚¹
5. **ç¤¾åŒºè´¡çŒ®**ï¼šå¼€å‘å¼€æºèŠ‚ç‚¹åˆ†äº«ç»™ n8n ç¤¾åŒº

> ğŸ’¡ **å‚è€ƒé¡¹ç›®**ï¼šæœ¬æ–‡åŸºäºå®é™…å¼€æºé¡¹ç›® n8n-nodes-sy-browseruse ç¼–å†™ï¼ŒåŒ…å«å®Œæ•´çš„èŠ‚ç‚¹å¼€å‘ç¤ºä¾‹ã€‚
>
> GitHubï¼šgithub.com/Cshiyuan/n8n-nodes-sy-browseruse

### 2.2 æŠ€æœ¯æ ˆè¦æ±‚

å¼€å‘ n8n è‡ªå®šä¹‰èŠ‚ç‚¹éœ€è¦ä»¥ä¸‹æŠ€æœ¯ï¼š

- **TypeScript**ï¼šn8n èŠ‚ç‚¹ä½¿ç”¨ TypeScript å¼€å‘
- **Node.js**ï¼šn8n è¿è¡Œåœ¨ Node.js ç¯å¢ƒ
- **n8n-workflow**ï¼šn8n æä¾›çš„æ ¸å¿ƒç±»å‹å’Œå·¥å…·
- **@n8n/node-cli**ï¼šå®˜æ–¹èŠ‚ç‚¹å¼€å‘å·¥å…·é“¾

### 2.3 é¡¹ç›®ç»“æ„

ä¸€ä¸ªå…¸å‹çš„ n8n ç¤¾åŒºèŠ‚ç‚¹åŒ…ç»“æ„å¦‚ä¸‹ï¼š

```
n8n-nodes-my-package/
â”œâ”€â”€ package.json              # npm åŒ…é…ç½®
â”œâ”€â”€ tsconfig.json             # TypeScript é…ç½®
â”œâ”€â”€ nodes/                    # èŠ‚ç‚¹å®ç°ç›®å½•
â”‚   â””â”€â”€ MyNode/
â”‚       â”œâ”€â”€ MyNode.node.ts    # èŠ‚ç‚¹å®šä¹‰
â”‚       â”œâ”€â”€ operations.ts     # æ“ä½œå®ç°
â”‚       â””â”€â”€ transport.ts      # API é€šä¿¡å±‚
â”œâ”€â”€ credentials/              # å‡­æ®å®šä¹‰ç›®å½•
â”‚   â””â”€â”€ MyApi.credentials.ts  # API å‡­æ®
â””â”€â”€ icons/                    # èŠ‚ç‚¹å›¾æ ‡
    â””â”€â”€ mynode.svg
```

---

## ä¸‰ã€èŠ‚ç‚¹å¼€å‘ä¸‰å±‚æ¶æ„

<!--
å›¾ç‰‡å ä½ï¼šä¸‰å±‚æ¶æ„ç¤ºæ„å›¾
åŸå›¾å‚è€ƒï¼šhttps://images.unsplash.com/photo-1558494949-ef010cbdcc31?w=1000&q=80
å»ºè®®è‡ªå·±ç»˜åˆ¶æ¶æ„å›¾
-->

n8n èŠ‚ç‚¹éµå¾ªæ¸…æ™°çš„ä¸‰å±‚æ¶æ„æ¨¡å¼ï¼š

### 3.1 èŠ‚ç‚¹å®šä¹‰å±‚ï¼ˆ`*.node.ts`ï¼‰

è¿™æ˜¯èŠ‚ç‚¹çš„å…¥å£æ–‡ä»¶ï¼Œå®šä¹‰èŠ‚ç‚¹çš„å¤–è§‚å’Œè¡Œä¸ºã€‚

```typescript
import { INodeType, INodeTypeDescription } from 'n8n-workflow';

export class MyNode implements INodeType {
  description: INodeTypeDescription = {
    displayName: 'My Node',           // èŠ‚ç‚¹æ˜¾ç¤ºåç§°
    name: 'myNode',                   // èŠ‚ç‚¹å†…éƒ¨åç§°
    group: ['transform'],             // èŠ‚ç‚¹åˆ†ç»„
    version: 1,                       // èŠ‚ç‚¹ç‰ˆæœ¬
    description: 'My custom node',    // èŠ‚ç‚¹æè¿°
    defaults: {
      name: 'My Node',
    },
    inputs: ['main'],                 // è¾“å…¥ç«¯ç‚¹
    outputs: ['main'],                // è¾“å‡ºç«¯ç‚¹
    credentials: [                    // å‡­æ®é…ç½®
      {
        name: 'myApi',
        required: true,
      },
    ],
    properties: [                     // èŠ‚ç‚¹å‚æ•°
      {
        displayName: 'Operation',
        name: 'operation',
        type: 'options',
        options: [
          { name: 'Get', value: 'get' },
          { name: 'Create', value: 'create' },
        ],
        default: 'get',
      },
    ],
  };

  // èŠ‚ç‚¹æ‰§è¡Œæ–¹æ³•
  async execute(this: IExecuteFunctions): Promise<INodeExecutionData[][]> {
    // è°ƒç”¨æ“ä½œå®ç°å±‚
  }
}
```

**å…³é”®é…ç½®è¯´æ˜ï¼š**

| å±æ€§ | è¯´æ˜ |
|------|------|
| `displayName` | ç”¨æˆ·åœ¨ç•Œé¢ä¸­çœ‹åˆ°çš„åç§° |
| `name` | ä»£ç ä¸­ä½¿ç”¨çš„å”¯ä¸€æ ‡è¯†ç¬¦ |
| `properties` | å®šä¹‰èŠ‚ç‚¹çš„å¯é…ç½®å‚æ•° |
| `credentials` | æŒ‡å®šéœ€è¦çš„è®¤è¯å‡­æ® |
| `execute` | èŠ‚ç‚¹çš„æ ¸å¿ƒæ‰§è¡Œé€»è¾‘ |

> ğŸ“¦ **å®Œæ•´ç¤ºä¾‹**ï¼šæŸ¥çœ‹ SYBrowserUse èŠ‚ç‚¹æºç äº†è§£å®é™…é¡¹ç›®ä¸­çš„èŠ‚ç‚¹å®šä¹‰
>
> è·¯å¾„ï¼šnodes/SYBrowserUse/SYBrowserUse.node.ts

### 3.2 æ“ä½œå®ç°å±‚ï¼ˆ`operations.ts`ï¼‰

è´Ÿè´£å…·ä½“çš„ä¸šåŠ¡é€»è¾‘å®ç°ã€‚

```typescript
import { IExecuteFunctions, INodeExecutionData } from 'n8n-workflow';

export async function executeGetOperation(
  context: IExecuteFunctions,
  itemIndex: number
): Promise<INodeExecutionData> {
  // 1. è·å–ç”¨æˆ·è¾“å…¥çš„å‚æ•°
  const resourceId = context.getNodeParameter('resourceId', itemIndex) as string;

  // 2. å‚æ•°éªŒè¯
  if (!resourceId) {
    throw new NodeOperationError(
      context.getNode(),
      'Resource ID is required',
      { itemIndex }
    );
  }

  // 3. è°ƒç”¨ API
  const response = await makeApiRequest(context, 'GET', `/resource/${resourceId}`);

  // 4. è¿”å›æ ‡å‡†æ ¼å¼
  return {
    json: response,
    pairedItem: { item: itemIndex },
  };
}
```

**æœ€ä½³å®è·µï¼š**
- âœ… æ¸…æ™°çš„å‚æ•°æå–å’ŒéªŒè¯
- âœ… ä½¿ç”¨ `NodeOperationError` æŠ›å‡ºé”™è¯¯
- âœ… è¿”å›æ ‡å‡†çš„ `INodeExecutionData` æ ¼å¼
- âœ… åŒ…å« `pairedItem` ç”¨äºè¿½è¸ªæ•°æ®æ¥æº

### 3.3 ä¼ è¾“å±‚ï¼ˆ`transport.ts`ï¼‰

å°è£… API è°ƒç”¨å’Œé”™è¯¯å¤„ç†ã€‚

```typescript
import { IExecuteFunctions, IHttpRequestOptions } from 'n8n-workflow';

export async function makeApiRequest(
  context: IExecuteFunctions,
  method: string,
  endpoint: string,
  body?: any
): Promise<any> {
  // 1. è·å–å‡­æ®
  const credentials = await context.getCredentials('myApi');

  // 2. æ„å»ºè¯·æ±‚
  const options: IHttpRequestOptions = {
    method,
    url: `https://api.example.com${endpoint}`,
    headers: {
      'Authorization': `Bearer ${credentials.apiKey}`,
      'Content-Type': 'application/json',
    },
    body,
  };

  // 3. å‘é€è¯·æ±‚
  try {
    const response = await context.helpers.httpRequest(options);
    return response;
  } catch (error) {
    // 4. é”™è¯¯å¤„ç†
    throw new NodeApiError(context.getNode(), error);
  }
}
```

**å…³é”®ç‚¹ï¼š**
- ä½¿ç”¨ `context.helpers.httpRequest` å‘é€ HTTP è¯·æ±‚
- ç»Ÿä¸€çš„é”™è¯¯å¤„ç†å’Œè½¬æ¢
- è®¤è¯ä¿¡æ¯ä»å‡­æ®ç³»ç»Ÿè·å–
- æ”¯æŒä¸åŒçš„ HTTP æ–¹æ³•

---

## å››ã€å‡­æ®ç³»ç»Ÿ

å‡­æ®ç”¨äºå®‰å…¨åœ°å­˜å‚¨ API å¯†é’¥ã€ä»¤ç‰Œç­‰æ•æ„Ÿä¿¡æ¯ã€‚

```typescript
import { ICredentialType, INodeProperties } from 'n8n-workflow';

export class MyApiCredentials implements ICredentialType {
  name = 'myApi';
  displayName = 'My API';
  documentationUrl = 'https://docs.example.com/api';

  properties: INodeProperties[] = [
    {
      displayName: 'API Key',
      name: 'apiKey',
      type: 'string',
      typeOptions: {
        password: true,  // éšè—è¾“å…¥
      },
      default: '',
      required: true,
    },
  ];

  // è‡ªåŠ¨æ³¨å…¥è®¤è¯å¤´
  authenticate = {
    type: 'generic',
    properties: {
      headers: {
        'Authorization': '={{`Bearer ${$credentials.apiKey}`}}',
      },
    },
  };

  // å‡­æ®æµ‹è¯•
  test = {
    request: {
      baseURL: 'https://api.example.com',
      url: '/ping',
    },
  };
}
```

**å‡­æ®ç±»å‹ï¼š**

| ç±»å‹ | è¯´æ˜ |
|------|------|
| API Key | ç®€å•çš„å¯†é’¥è®¤è¯ |
| OAuth2 | æ ‡å‡† OAuth2 æˆæƒæµç¨‹ |
| Basic Auth | ç”¨æˆ·åå’Œå¯†ç  |
| Custom | è‡ªå®šä¹‰è®¤è¯æ–¹å¼ |

---

## äº”ã€å¼€å‘å·¥å…·é“¾

### 5.1 åˆå§‹åŒ–é¡¹ç›®

```bash
# å®‰è£… n8n CLI å·¥å…·
npm install -g @n8n/node-cli

# åˆ›å»ºæ–°é¡¹ç›®
npx @n8n/node-cli init

# è¿›å…¥é¡¹ç›®ç›®å½•
cd n8n-nodes-my-package

# å®‰è£…ä¾èµ–
npm install
```

### 5.2 å¼€å‘å‘½ä»¤

```bash
# å¼€å‘æ¨¡å¼ - ç›‘å¬æ–‡ä»¶å˜åŒ–
npm run dev

# æ„å»ºé¡¹ç›®
npm run build

# ä»£ç æ£€æŸ¥
npm run lint

# è‡ªåŠ¨ä¿®å¤ lint é—®é¢˜
npm run lint:fix
```

### 5.3 æœ¬åœ°æµ‹è¯•

```bash
# å¯åŠ¨ n8n å¹¶åŠ è½½è‡ªå®šä¹‰èŠ‚ç‚¹
n8n start

# æˆ–ä½¿ç”¨ Docker
docker run -it --rm \
  -p 5678:5678 \
  -v ~/.n8n:/home/node/.n8n \
  -v $(pwd):/data \
  n8nio/n8n
```

---

## å…­ã€package.json é…ç½®

n8n èŠ‚ç‚¹åŒ…éœ€è¦ç‰¹æ®Šçš„ `package.json` é…ç½®ï¼š

```json
{
  "name": "n8n-nodes-my-package",
  "version": "1.0.0",
  "description": "My custom n8n nodes",
  "keywords": ["n8n-community-node-package"],
  "license": "MIT",
  "scripts": {
    "build": "n8n-node build",
    "dev": "n8n-node dev",
    "lint": "n8n-node lint",
    "lint:fix": "n8n-node lint --fix"
  },
  "files": ["dist"],
  "n8n": {
    "n8nNodesApiVersion": 1,
    "credentials": [
      "dist/credentials/MyApi.credentials.js"
    ],
    "nodes": [
      "dist/nodes/MyNode/MyNode.node.js"
    ]
  },
  "devDependencies": {
    "@n8n/node-cli": "*",
    "typescript": "~5.9.2"
  },
  "peerDependencies": {
    "n8n-workflow": "*"
  }
}
```

**å…³é”®å­—æ®µï¼š**

| å­—æ®µ | è¯´æ˜ |
|------|------|
| `keywords` | å¿…é¡»åŒ…å« `"n8n-community-node-package"` |
| `n8n.credentials` | å‡­æ®æ–‡ä»¶åˆ—è¡¨ï¼ˆç¼–è¯‘åçš„è·¯å¾„ï¼‰ |
| `n8n.nodes` | èŠ‚ç‚¹æ–‡ä»¶åˆ—è¡¨ï¼ˆç¼–è¯‘åçš„è·¯å¾„ï¼‰ |
| `files` | å‘å¸ƒåˆ° npm çš„æ–‡ä»¶ï¼ˆåªåŒ…å« `dist`ï¼‰ |

---

## ä¸ƒã€å®æˆ˜æ¡ˆä¾‹ï¼šæµè§ˆå™¨è‡ªåŠ¨åŒ–èŠ‚ç‚¹

<!--
å›¾ç‰‡å ä½ï¼šAI æµè§ˆå™¨è‡ªåŠ¨åŒ–ç¤ºæ„å›¾
åŸå›¾å‚è€ƒï¼šhttps://images.unsplash.com/photo-1531746790731-6c087fecd65a?w=1000&q=80
-->

ä»¥æœ¬é¡¹ç›®ä¸­çš„ `SYBrowserUse` èŠ‚ç‚¹ä¸ºä¾‹ï¼Œå®ƒå®ç°äº† AI é©±åŠ¨çš„æµè§ˆå™¨è‡ªåŠ¨åŒ–ï¼š

### 7.1 èŠ‚ç‚¹ç‰¹æ€§

- **åŒæ¨¡å¼æ¶æ„**ï¼šæ”¯æŒ Cloud API å’Œ Local Bridge ä¸¤ç§è¿æ¥æ–¹å¼
- **8 ç§æ“ä½œ**ï¼šRun Taskã€Get Task Statusã€Stop Task ç­‰
- **å¤š AI æä¾›å•†**ï¼šæ”¯æŒ OpenAIã€Anthropicã€Google ç­‰
- **åŠ¨æ€é…ç½®**ï¼šæ ¹æ®è¿æ¥ç±»å‹æ˜¾ç¤ºä¸åŒçš„å‚æ•°

### 7.2 å…³é”®å®ç°

**èŠ‚ç‚¹å®šä¹‰ - åŒæ¨¡å¼é…ç½®ï¼š**

```typescript
export class SYBrowserUse implements INodeType {
  description: INodeTypeDescription = {
    // ...
    properties: [
      {
        displayName: 'Connection Type',
        name: 'connectionType',
        type: 'options',
        options: [
          { name: 'Cloud API', value: 'cloud' },
          { name: 'Local Bridge', value: 'localBridge' },
        ],
        default: 'cloud',
      },
      // æ ¹æ® connectionType åŠ¨æ€æ˜¾ç¤ºå‡­æ®
      {
        displayName: 'Credentials',
        name: 'credentials',
        type: 'credentials',
        required: true,
        displayOptions: {
          show: {
            connectionType: ['cloud'],
          },
        },
        default: 'browserUseCloudApi',
      },
      // ...
    ],
  };
}
```

**æ“ä½œå®ç° - Run Taskï¼š**

```typescript
export async function executeRunTask(
  context: IExecuteFunctions,
  itemIndex: number,
  config: OperationContext
): Promise<INodeExecutionData> {
  // è·å–å‚æ•°
  const instructions = context.getNodeParameter('instructions', itemIndex) as string;
  const aiProvider = context.getNodeParameter('aiProvider', itemIndex) as string;

  // æ„å»ºè¯·æ±‚ä½“
  const payload = {
    task: instructions,
    ai_provider: aiProvider,
  };

  // è°ƒç”¨ API
  const response = await makeApiRequest(
    context,
    'POST',
    '/tasks',
    payload,
    config
  );

  return {
    json: response,
    pairedItem: { item: itemIndex },
  };
}
```

### 7.3 æºç å‚è€ƒ

æŸ¥çœ‹å®Œæ•´å®ç°ï¼š
- **èŠ‚ç‚¹å®šä¹‰**ï¼šnodes/SYBrowserUse/SYBrowserUse.node.ts
- **æ“ä½œå®ç°**ï¼šnodes/SYBrowserUse/operations.ts
- **ä¼ è¾“å±‚**ï¼šnodes/SYBrowserUse/transport.ts

---

## å…«ã€æœ€ä½³å®è·µ

### 8.1 é”™è¯¯å¤„ç†

```typescript
// ä½¿ç”¨ n8n ç‰¹å®šçš„é”™è¯¯ç±»å‹
import { NodeOperationError, NodeApiError } from 'n8n-workflow';

// å‚æ•°é”™è¯¯
throw new NodeOperationError(
  this.getNode(),
  'Invalid parameter value',
  { itemIndex }
);

// API é”™è¯¯
throw new NodeApiError(
  this.getNode(),
  error,
  { itemIndex }
);
```

### 8.2 å‚æ•°éªŒè¯

```typescript
// éªŒè¯å¿…éœ€å‚æ•°
const apiKey = this.getNodeParameter('apiKey', itemIndex) as string;
if (!apiKey?.trim()) {
  throw new NodeOperationError(
    this.getNode(),
    'API Key is required',
    { itemIndex }
  );
}

// éªŒè¯ JSON æ ¼å¼
const jsonString = this.getNodeParameter('jsonData', itemIndex) as string;
try {
  JSON.parse(jsonString);
} catch (error) {
  throw new NodeOperationError(
    this.getNode(),
    'Invalid JSON format',
    { itemIndex }
  );
}
```

### 8.3 æ‰¹é‡å¤„ç†

```typescript
async execute(this: IExecuteFunctions): Promise<INodeExecutionData[][]> {
  const items = this.getInputData();
  const returnData: INodeExecutionData[] = [];

  // éå†æ‰€æœ‰è¾“å…¥é¡¹
  for (let i = 0; i < items.length; i++) {
    try {
      const result = await executeOperation(this, i);
      returnData.push(result);
    } catch (error) {
      // é”™è¯¯å¤„ç†
      if (this.continueOnFail()) {
        returnData.push({
          json: { error: error.message },
          pairedItem: { item: i },
        });
      } else {
        throw error;
      }
    }
  }

  return [returnData];
}
```

### 8.4 èµ„æºå¯¼å‘è®¾è®¡

å¯¹äºå¤æ‚èŠ‚ç‚¹ï¼Œä½¿ç”¨ resource/operation ä¸¤çº§å‚æ•°ç»„ç»‡ï¼š

```typescript
properties: [
  {
    displayName: 'Resource',
    name: 'resource',
    type: 'options',
    options: [
      { name: 'Issue', value: 'issue' },
      { name: 'Pull Request', value: 'pullRequest' },
    ],
    default: 'issue',
  },
  {
    displayName: 'Operation',
    name: 'operation',
    type: 'options',
    displayOptions: {
      show: {
        resource: ['issue'],
      },
    },
    options: [
      { name: 'Get', value: 'get' },
      { name: 'Create', value: 'create' },
      { name: 'Update', value: 'update' },
    ],
    default: 'get',
  },
]
```

---

## ä¹ã€å‘å¸ƒå’Œåˆ†å‘

> ğŸ¯ **å®é™…æ¡ˆä¾‹**ï¼šn8n-nodes-sy-browseruse å¼€æºé¡¹ç›®ï¼Œå¯ä» GitHub ç›´æ¥å®‰è£…
>
> å®‰è£…å‘½ä»¤ï¼š`npm install github:Cshiyuan/n8n-nodes-sy-browseruse`

### 9.1 å‘å¸ƒåˆ° npm

```bash
# ç™»å½• npm
npm login

# å‘å¸ƒåŒ…
npm publish

# æˆ–ä½¿ç”¨ release-it è‡ªåŠ¨åŒ–
npm run release
```

### 9.2 ç”¨æˆ·å®‰è£…

ç”¨æˆ·å¯ä»¥é€šè¿‡ n8n ç•Œé¢å®‰è£…ç¤¾åŒºèŠ‚ç‚¹ï¼š

1. æ‰“å¼€ n8n è®¾ç½®
2. è¿›å…¥"ç¤¾åŒºèŠ‚ç‚¹"éƒ¨åˆ†
3. è¾“å…¥åŒ…å `n8n-nodes-my-package`
4. ç‚¹å‡»å®‰è£…

æˆ–é€šè¿‡å‘½ä»¤è¡Œï¼š

```bash
# åœ¨ n8n æ•°æ®ç›®å½•å®‰è£…
cd ~/.n8n
npm install n8n-nodes-my-package

# é‡å¯ n8n
n8n start
```

### 9.3 ç‰ˆæœ¬ç®¡ç†

éµå¾ªè¯­ä¹‰åŒ–ç‰ˆæœ¬è§„èŒƒï¼š

| ç‰ˆæœ¬ç±»å‹ | è¯´æ˜ | ç¤ºä¾‹ |
|---------|------|------|
| ä¸»ç‰ˆæœ¬å· | ä¸å…¼å®¹çš„ API å˜æ›´ | 1.0.0 â†’ 2.0.0 |
| æ¬¡ç‰ˆæœ¬å· | å‘åå…¼å®¹çš„åŠŸèƒ½æ€§æ–°å¢ | 1.0.0 â†’ 1.1.0 |
| ä¿®è®¢å· | å‘åå…¼å®¹çš„é—®é¢˜ä¿®æ­£ | 1.0.0 â†’ 1.0.1 |

```bash
# è‡ªåŠ¨ç‰ˆæœ¬æ›´æ–°å’Œå‘å¸ƒ
npm run release

# æ‰‹åŠ¨æŒ‡å®šç‰ˆæœ¬
npm version patch  # 1.0.0 -> 1.0.1
npm version minor  # 1.0.1 -> 1.1.0
npm version major  # 1.1.0 -> 2.0.0
```

---

## åã€è°ƒè¯•æŠ€å·§

### 10.1 ä½¿ç”¨ VS Code è°ƒè¯•

åˆ›å»º `.vscode/launch.json`ï¼š

```json
{
  "version": "0.2.0",
  "configurations": [
    {
      "name": "Attach to n8n",
      "type": "node",
      "request": "attach",
      "port": 9229,
      "restart": true
    }
  ]
}
```

å¯åŠ¨ n8n è°ƒè¯•æ¨¡å¼ï¼š

```bash
n8n start --tunnel --debug
```

### 10.2 æ—¥å¿—è¾“å‡º

```typescript
// ä½¿ç”¨ console.log
console.log('Debug info:', data);

// åœ¨ n8n ç•Œé¢æŸ¥çœ‹èŠ‚ç‚¹è¾“å‡º
return [{
  json: {
    debug: 'Debug information',
    data: processedData,
  },
}];
```

---

## åä¸€ã€å¸¸è§é—®é¢˜

**Qï¼šèŠ‚ç‚¹æ— æ³•åœ¨ n8n ä¸­æ˜¾ç¤ºï¼Ÿ**

æ£€æŸ¥ï¼š
- `package.json` ä¸­ `keywords` åŒ…å« `"n8n-community-node-package"`
- `n8n` å­—æ®µæ­£ç¡®é…ç½®äº†èŠ‚ç‚¹å’Œå‡­æ®è·¯å¾„
- ç¼–è¯‘è¾“å‡ºåœ¨ `dist` ç›®å½•
- é‡å¯ n8n

**Qï¼šå¦‚ä½•å¤„ç†å¤§é‡æ•°æ®ï¼Ÿ**

- ä½¿ç”¨æ‰¹é‡ API
- å®ç°åˆ†é¡µ
- æ·»åŠ é€Ÿç‡é™åˆ¶
- è€ƒè™‘ä½¿ç”¨æµå¼å¤„ç†

**Qï¼šå¦‚ä½•æµ‹è¯• OAuth2 è®¤è¯ï¼Ÿ**

- æœ¬åœ°ä½¿ç”¨ ngrok æš´éœ²å›è°ƒ URL
- ä½¿ç”¨ n8n Cloud çš„ OAuth å›è°ƒ
- å‚è€ƒå®˜æ–¹ OAuth2 èŠ‚ç‚¹å®ç°

---

## åäºŒã€å­¦ä¹ èµ„æº

### å®˜æ–¹æ–‡æ¡£
- **n8n æ–‡æ¡£**ï¼šdocs.n8n.io
- **èŠ‚ç‚¹å¼€å‘æŒ‡å—**ï¼šdocs.n8n.io/integrations/creating-nodes/
- **API å‚è€ƒ**ï¼šdocs.n8n.io/api/

### ç¤ºä¾‹é¡¹ç›®
- **n8n å®˜æ–¹èŠ‚ç‚¹**ï¼šgithub.com/n8n-io/n8n/tree/master/packages/nodes-base
- **ç¤¾åŒºèŠ‚ç‚¹**ï¼šnpmjs.com/search?q=n8n-nodes

### ç¤¾åŒº
- **n8n è®ºå›**ï¼šcommunity.n8n.io
- **Discord**ï¼šn8n å®˜æ–¹ Discord æœåŠ¡å™¨
- **GitHub Discussions**ï¼šgithub.com/n8n-io/n8n/discussions

---

## æ€»ç»“

n8n æ˜¯ä¸€ä¸ªå¼ºå¤§è€Œçµæ´»çš„å·¥ä½œæµè‡ªåŠ¨åŒ–å¹³å°ï¼Œé€šè¿‡è‡ªå®šä¹‰èŠ‚ç‚¹å¼€å‘ï¼Œä½ å¯ä»¥ï¼š

- âœ… **æ‰©å±•åŠŸèƒ½**ï¼šé›†æˆä»»ä½• API æˆ–æœåŠ¡
- âœ… **æå‡æ•ˆç‡**ï¼šå°è£…å¤æ‚é€»è¾‘ä¸ºå¯å¤ç”¨èŠ‚ç‚¹
- âœ… **åˆ†äº«è´¡çŒ®**ï¼šå°†èŠ‚ç‚¹å‘å¸ƒåˆ°ç¤¾åŒºä¾›ä»–äººä½¿ç”¨
- âœ… **å®Œå…¨æ§åˆ¶**ï¼šè‡ªæ‰˜ç®¡éƒ¨ç½²ï¼Œæ•°æ®å®‰å…¨å¯æ§

### å¼€å‘æµç¨‹æ€»ç»“

1. **è§„åˆ’**ï¼šç¡®å®šèŠ‚ç‚¹åŠŸèƒ½å’Œå‚æ•°è®¾è®¡
2. **åˆå§‹åŒ–**ï¼šä½¿ç”¨ `@n8n/node-cli` åˆ›å»ºé¡¹ç›®
3. **å®ç°**ï¼šæŒ‰ç…§ä¸‰å±‚æ¶æ„ç¼–å†™ä»£ç 
4. **æµ‹è¯•**ï¼šæœ¬åœ°æµ‹è¯•èŠ‚ç‚¹åŠŸèƒ½
5. **å‘å¸ƒ**ï¼šå‘å¸ƒåˆ° npm ä¾›ä»–äººä½¿ç”¨
6. **ç»´æŠ¤**ï¼šæ ¹æ®åé¦ˆæŒç»­æ”¹è¿›

### ä¸‹ä¸€æ­¥

- ğŸš€ å…‹éš†æœ¬é¡¹ç›®æŸ¥çœ‹å®Œæ•´ç¤ºä¾‹
- ğŸ“– é˜…è¯» n8n å®˜æ–¹æ–‡æ¡£
- ğŸ’¡ å¼€å§‹å¼€å‘ä½ çš„ç¬¬ä¸€ä¸ªè‡ªå®šä¹‰èŠ‚ç‚¹
- ğŸŒŸ å‘ç¤¾åŒºåˆ†äº«ä½ çš„èŠ‚ç‚¹

---

## ç›¸å…³èµ„æº

| èµ„æº | é“¾æ¥ |
|------|------|
| æœ¬é¡¹ç›®æºç  | github.com/Cshiyuan/n8n-nodes-sy-browseruse |
| N8N å®˜æ–¹æ–‡æ¡£ | docs.n8n.io |
| èŠ‚ç‚¹å¼€å‘æŒ‡å— | docs.n8n.io/integrations/creating-nodes |

**ç›¸å…³æ–‡ç« ï¼š**
- ã€ŠAIè¿æ¥ä¸€åˆ‡ï¼ŸN8N å…¥é—¨åˆ°ä¸Šæ‰‹ã€‹
- ã€Šå¦‚ä½•è®© AI å¸®æˆ‘ä»å°çº¢ä¹¦ä¸Šæ”¶é›†æœ‰ç”¨çš„æ—…æ¸¸æ”»ç•¥ã€‹

---

## å…³äºä½œè€…

**Cshiyuan** - ä¸“æ³¨äº AI è‡ªåŠ¨åŒ–å’Œæ•ˆç‡å·¥å…·å¼€å‘

- ğŸ“§ é‚®ç®±ï¼š826718591@qq.com
- ğŸ™ GitHubï¼šgithub.com/Cshiyuan

---

**å¦‚æœè§‰å¾—æœ‰å¸®åŠ©ï¼š**
- ğŸ‘ ç‚¹ä¸ªã€Œèµã€æ”¯æŒä¸€ä¸‹
- ğŸ‘€ ç‚¹å‡»ã€Œåœ¨çœ‹ã€è®©æ›´å¤šäººçœ‹åˆ°
- ğŸ’¬ æœ‰é—®é¢˜æ¬¢è¿ã€Œç•™è¨€ã€è®¨è®º
- â­ ç»™ GitHub é¡¹ç›®ç‚¹ä¸ª Star

---

*æœ¬æ–‡é¦–å‘äºå¾®ä¿¡å…¬ä¼—å·ï¼Œè½¬è½½è¯·æ³¨æ˜å‡ºå¤„*

**æœ€åæ›´æ–°**ï¼š2025-12-10

> ğŸ’¡ æœ¬æ–‡åŸºäº n8n-nodes-sy-browseruse é¡¹ç›®å®æˆ˜ç»éªŒç¼–å†™ï¼ŒåŒ…å« SYBrowserUse å’Œ GitHub Issues ä¸¤ä¸ªå®é™…èŠ‚ç‚¹çš„å®ç°æ¡ˆä¾‹ã€‚
